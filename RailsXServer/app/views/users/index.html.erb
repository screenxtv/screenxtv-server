<%= url_for controller: :users, action: :show, name:'hoge' %>
<style>
div.main{
	margin:5px 20px;
	font-size:18px;
}
div.item{
	box-shadow:0 0 8px silver;
	margin:16px;
	padding:4px;
}
div.item div{font-size:18px;}
div.item div.url{font-size:24px;}
</style>
<div class='main'>
	<h1>User Profile</h1>
	<div class='item'>
		<%= image_tag current_user.user_icon %>
		<div>user name: <%= current_user.name %></div>
		<div>display name: <input value="<%= current_user.display_name %>"></div>
		<div>email: <input value="<%= current_user.email %>"></div>
		<%= link_to 'edit',users_edit_path %>
	</div>
	<div class='socials'>
		<% oauths = current_user.oauths %>
		<% OAuthConsumers.keys.each do |provider| %>
			<%= social = social_info[provider] %>
			<div>
				<% if social %>
					<%= image_tag social[:icon], width:48,height:48 %>
					<%= provider %>
					<%= social[:display_name] %>
					<%= social[:name] %>
					<%= link_to 'disconnect', oauth_disconnect_path(provider:provider), method: :post %>
				<% else %>
					<%= link_to 'connect',oauth_login_path(provider) %>
				<% end %>
			</div>
		<% end %>
	</div>
	<br>
	<h1>Reserved URLs</h1>
	<% screens = current_user.screens %>
	<% screens.each do |screen| %>
		<div class='item'>
			<div class='url'><a href="/<%= screen.url %>"><%= screen.url %></a></div>
			<%= form_tag users_change_screen_path do %>
				<input type=hidden name=url value="<%= screen.url %>">
				<input name='new_url' autocomplete=off placeholder='new url'>
				<input type=submit value=change>
			<% end %>
			<div>Total Viewer: <%= screen.total_viewer %></div>
			<div>Max Viewer: <%= screen.max_viewer %></div>
			<% time=screen.total_time %>
			<div>Total Time: <%= time/60/60/24 %>days <%= h=time/60/60%24;"#{h/10}#{h%10}"%>:<%= m=time/60%60;"#{m/10}#{m%10}" %></div>
		</div>
	<% end %>
	<% if screens.size < Screen::USER_MAX_SCREENS %>
		<%= form_tag users_create_screen_path do %>
			<input name=url autocomplete=off placeholder='url'>
			<input type=submit value='create'>
		<% end %>
	<% end %>
</div>